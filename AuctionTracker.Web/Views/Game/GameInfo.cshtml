@using AuctionTracker.Web.Class

@model Product

@{
    ViewData["Title"] = string.Format("{0} - Auction Sale Info:", Model.SelectedProduct);

    GeneralHelper generalHelper = new GeneralHelper();
}

<div>
    <h2>@Model.SelectedProduct - Auction Sale Info:</h2>

    <br />

    <table style="width:40%">
        <tbody>
            <tr>
                <th>
                    Result Count:
                </th>
                <td>
                    @Model.Game.Count().ToString()
                </td>
            </tr>
            <tr>
                <th>
                    Mean Price:
                </th>
                <td>
                    <b>£@Math.Round(Model.MeanPrice, 2) (£@Math.Round(Model.MeanPriceAndPostage, 2))</b>
                </td>
            </tr>
            <tr>
                <th>
                    Median Price:
                </th>
                <td>
                    £@Math.Round(Model.MedianPrice, 2) (£@Math.Round(Model.MedianPriceAndPostage, 2))
                </td>
            </tr>
            <tr>
                <th>
                    Range Price:
                </th>
                <td>
                    Min: £@Math.Round(Model.MinPrice, 2) (£@Math.Round(Model.MinPriceAndPostage, 2)) > Max: £@Math.Round(Model.MaxPrice, 2) (£@Math.Round(Model.MaxPriceAndPostage, 2))
                </td>
            </tr>
            @{
                if (Model.MaxPriceCurrentYear != 0.00M)
                {
                    <tr>
                        <th>
                            @DateTime.Now.Year Range Price:
                        </th>
                        <td>
                            Min: £@Math.Round(Model.MinPriceCurrentYear, 2) (£@Math.Round(Model.MinPriceAndPostageCurrentYear, 2)) > Max: £@Math.Round(Model.MaxPriceCurrentYear, 2) (£@Math.Round(Model.MaxPriceAndPostageCurrentYear, 2))
                        </td>
                    </tr>
                }
            }
            <tr>
                <th>
                    Mean Postage:
                </th>
                <td>
                    <b>£@Math.Round(Model.MeanPostage, 2)</b>
                </td>
            </tr>
            <tr>
                <th>
                    Median Postage:
                </th>
                <td>
                    £@Model.MedianPostage
                </td>
            </tr>
            <tr>
                <th>
                    Range Postage:
                </th>
                <td>
                    Min: £@Model.MinPostage > Max: £@Model.MaxPostage
                </td>
            </tr>
            <tr>
                <th>
                    Price Trend:
                </th>
                <td>
                    @Model.Trend
                </td>
            </tr>
        </tbody>
    </table>

    <br />

    <form method="post" asp-action="GameSortOrder">

        <label>Order By:</label>

        <select class="form-select" asp-for="SelectedSortOrder" asp-items="@Model.SortOrderListGame" style="width:200px">
            <option>Please select one</option>
        </select>

        <p></p>

        <div class="card border-primary mb-3" style="width: 100%">
            <div class="card-header">Show Only:</div>
            <div class="card-body">

                <div class="form-check">
                    <input asp-for="SearchCondition" class="form-check-input" type="checkbox">
                    <label class="form-check-label">
                        Mint/High Condition
                    </label>
                </div>

                <div class="form-check">
                    <input asp-for="SearchComplete" class="form-check-input" type="checkbox">
                    <label class="form-check-label">
                        Complete
                    </label>
                </div>

                <div class="form-check">
                    <input asp-for="SearchCurrentYear" class="form-check-input" type="checkbox">
                    <label class="form-check-label">
                        Current Year
                    </label>
                </div>

            </div>
        </div>

        <button type="submit" class="btn btn-primary">Filter Results &nbsp; <i class="bi bi-filter"></i></button>

        <p></p>

        <input type="hidden" asp-for="@Model.SelectedProduct" />

    </form>

    <table style="width:100%">
        <thead>
            <tr>
                <th>
                    Name:
                </th>
                <th>
                    Condition:
                </th>
                <th>
                    Sealed:
                </th>
                <th>
                    Platform:
                </th>
                <th>
                    Media Type:
                </th>
                <th>
                    Complete:
                </th>
                <th>
                    Price:
                </th>
                <th>
                    Postage:
                </th>
                <th>
                    Sale Date:
                </th>
                <th>
                    Description:
                </th>
            </tr>
        </thead>
        <tbody>
            @foreach (var obj in Model.Game)
            {
                <tr>
                    <td style="text-align: center">
                        @obj.Name
                    </td>
                    <td style="text-align: center">
                        @obj.Condition
                    </td>
                    <td style="text-align: center">
                        @obj.Sealed
                    </td>
                    <td style="text-align: center">
                        @obj.Platform
                    </td>
                    <td style="text-align: center">
                        @obj.MediaType
                    </td>
                    <td style="text-align: center">
                        @obj.Complete
                    </td>
                    <td class="bgHighlight" style="text-align: center">
                        £@obj.Price
                    </td>
                    <td style="text-align: center">
                        £@obj.Postage
                    </td>
                    <td style="text-align: center">
                        @generalHelper.ConvertDateTime(obj.SaleDate)
                    </td>
                    <td>
                        @obj.Description
                    </td>
                </tr>
            }
        </tbody>
    </table>

    <br />

    <a asp-controller="Game" asp-action="Index" class="btn btn-primary siteButton">
        <i class="bi bi-chevron-left"></i> Back to list
    </a>

</div>